$("#CustTable").dataTable({ajax:{url:"/MyCustomer/Customer/IndexJson",type:"GET",dataSrc:"",datatype:"Json"},pagingType:"full_numbers",fixedHeader:{header:!0},language:{url:"//cdn.datatables.net/plug-ins/2.1.5/i18n/zh-HANT.json"},columns:[{data:"username",width:"10%"},{data:"password",width:"10%"},{data:"email",width:"10%"},{data:"phone",width:"10%"},{data:"blackCount",width:"10%"},{data:"isBlack",width:"10%"},{data:"userId",width:"10%",render:function(n){return`
                    <div>
                        <a data-id="${n}" class="EditBtn btn btn-info" data-bs-toggle="modal" data-bs-target="#EditCust">
                            <i class="fa-solid fa-pen-to-square fa-beat"></i>
                        </a>
                    </div>
                `}}]});$(document).on("click",".EditBtn",async function(){var n=$(this).data("id");let t=await fetch(`/MyCustomer/Customer/EditPartial/${n}`),i=await t.text();$(".Editbody").html(i);console.log(n);$(document).off("submit","#EditForm").on("submit","#EditForm",async function(n){n.preventDefault();let i=new FormData(this),t=await fetch($(this).attr("action"),{method:"POST",body:i});if(t.ok){let n=await t.json();n.success?(Swal.fire({icon:"success",title:"編輯成功!",showConfirmButton:!1,timer:1500}),$("#EditCust").modal("hide"),$("#CustTable").DataTable().ajax.reload(null,!1)):Swal.fire({icon:"error",title:"Oops...",text:n.errors?n.errors.join(", "):n.message})}else Swal.fire({icon:"error",title:"Oops...",text:"請求發生錯誤，請稍後再試"})});$("#EditCust").modal("show")});$("#CreateBtn").on("click",async function(){let n=await fetch("/MyCustomer/Customer/CreatePartial"),t=await n.text();$(".Createbody").html(t);$(document).off("submit","#CreateForm").on("submit","#CreateForm",async function(n){n.preventDefault();let i=new FormData(this),t=await fetch($(this).attr("action"),{method:"POST",body:i});if(t.ok){let n=await t.json();n.success?(Swal.fire({position:"top-end",icon:"success",title:"新增項目成功!",showConfirmButton:!1,timer:1500}),$("#CreateCust").modal("hide"),$("#CustTable").DataTable().ajax.reload(null,!1)):Swal.fire({icon:"error",title:"Oops...",text:n.errors?n.errors.join(", "):n.message})}else Swal.fire({icon:"error",title:"Oops...",text:"請求發生錯誤，請稍後再試"})});$("#CreateCust").modal("show")});